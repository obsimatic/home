import{S as H}from"./bundle-searchEngine-B6p1lMZz.js";document.addEventListener("astro:page-load",async()=>{const P=H.getInstance();await P.init();const o=document.getElementById("filter-text"),u=document.getElementById("filter-instock"),g=document.getElementById("filter-contact-price"),f=document.getElementById("price-min"),h=document.getElementById("price-max"),F=document.getElementById("apply-price-btn"),p=document.querySelectorAll('input[name="brand"]'),V=document.getElementById("clear-filters"),q=document.querySelectorAll(".product-row"),T=document.querySelectorAll(".category-result-card"),I=document.getElementById("results-table")?.closest(".results-section"),S=document.querySelector(".categories-grid")?.closest(".results-section"),M=document.getElementById("no-results-msg"),R=I?.querySelector(".count-badge"),A=S?.querySelector(".count-badge"),B=document.getElementById("itemsPerPage"),v=document.getElementById("pagination-container"),x=document.getElementById("prev-page"),L=document.getElementById("next-page"),w=document.getElementById("pagination-numbers");let c=1,y=parseInt(B?.value||"12"),r=[];function U(){if(!v||!w)return;const e=Math.ceil(r.length/y);if(e<=1){v.style.display="none";return}v.style.display="flex",w.innerHTML="";const s=Math.max(1,c-2),a=Math.min(e,s+4);for(let d=s;d<=a;d++){const m=document.createElement("button");m.className=`pagination-number ${d===c?"active":""}`,m.textContent=String(d),m.onclick=()=>{c=d,E()},w.appendChild(m)}x&&(x.disabled=c===1),L&&(L.disabled=c===e)}function E(){q.forEach(a=>a.style.display="none");const e=(c-1)*y,s=e+y;r.slice(e,s).forEach(a=>a.style.display=""),U()}function l(){if(!P.getIsLoaded())return;const e={q:o?.value||"",brand:Array.from(p).filter(t=>t.checked).map(t=>t.value),inStock:u?.checked||!1,contactPrice:g?.checked||!1,minPrice:parseFloat(f?.value)||0,maxPrice:parseFloat(h?.value)||1/0},s=P.search(e),a=new Set(s.products.map(t=>t.id)),d=new Set(s.categories.map(t=>t.id));r=[],q.forEach(t=>{const n=(t.querySelector("th a")?.textContent||"").trim();a.has(n)&&r.push(t)}),T.forEach(t=>{const n=t.dataset.slug||"";t.style.display=d.has(n)?"":"none"}),R&&(R.textContent=String(r.length)),A&&(A.textContent=String(s.categories.length)),I&&(I.style.display=r.length>0?"":"none"),S&&(S.style.display=s.categories.length>0?"":"none"),M&&(M.style.display=r.length===0&&s.categories.length===0?"block":"none");const m=P.getFacetedCounts(e);p.forEach(t=>{const n=t.parentElement?.querySelector(".count");if(n){const k=m[t.value]||0;n.textContent=`(${k})`,t.parentElement.style.opacity=k===0?"0.5":"1"}});const i=new URL(window.location.href);Object.entries(e).forEach(([t,n])=>{Array.isArray(n)?n.length>0?i.searchParams.set(t,n.join(",")):i.searchParams.delete(t):typeof n=="boolean"?n?i.searchParams.set(t,"true"):i.searchParams.delete(t):typeof n=="number"?n>0&&n<1/0?i.searchParams.set(t,String(n)):i.searchParams.delete(t):n?i.searchParams.set(t,n):i.searchParams.delete(t)}),window.history.replaceState({},"",i.toString()),c=1,E()}function j(){const e=new URLSearchParams(window.location.search);o&&(o.value=e.get("q")||""),u&&(u.checked=e.get("inStock")==="true"),g&&(g.checked=e.get("contactPrice")==="true"),f&&(f.value=e.get("minPrice")||""),h&&(h.value=e.get("maxPrice")||"");const s=e.get("brand")?.split(",")||[];p.forEach(a=>a.checked=s.includes(a.value)),l()}o?.addEventListener("input",l),u?.addEventListener("change",l),g?.addEventListener("change",l),F?.addEventListener("click",l),p.forEach(e=>e.addEventListener("change",l)),B?.addEventListener("change",()=>{y=parseInt(B.value),c=1,E()}),x?.addEventListener("click",()=>{c>1&&(c--,E())}),L?.addEventListener("click",()=>{const e=Math.ceil(r.length/y);c<e&&(c++,E())}),V?.addEventListener("click",()=>{o&&(o.value=""),u&&(u.checked=!1),g&&(g.checked=!1),f&&(f.value=""),h&&(h.value=""),p.forEach(e=>e.checked=!1),l()}),document.addEventListener("search-query-changed",e=>{o&&(o.value=e.detail,l(),I?.scrollIntoView({behavior:"smooth",block:"start"}))});const b=document.getElementById("toggle-categories-btn"),C=document.getElementById("categories-grid");b?.addEventListener("click",()=>{if(C){const e=C.style.display==="none";C.style.display=e?"grid":"none",b.textContent=e?b.dataset.hideText||"":b.dataset.showText||""}}),j()});
